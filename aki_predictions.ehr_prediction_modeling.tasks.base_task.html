
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>aki_predictions.ehr_prediction_modeling.tasks.base_task module &#8212; aki-predictions 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="aki_predictions.ehr_prediction_modeling.tasks.base_task_layer module" href="aki_predictions.ehr_prediction_modeling.tasks.base_task_layer.html" />
    <link rel="prev" title="aki_predictions.ehr_prediction_modeling.tasks.adverse_outcome_task module" href="aki_predictions.ehr_prediction_modeling.tasks.adverse_outcome_task.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-aki_predictions.ehr_prediction_modeling.tasks.base_task">
<span id="aki-predictions-ehr-prediction-modeling-tasks-base-task-module"></span><h1>aki_predictions.ehr_prediction_modeling.tasks.base_task module<a class="headerlink" href="#module-aki_predictions.ehr_prediction_modeling.tasks.base_task" title="Permalink to this heading">¶</a></h1>
<p>Utilities to handle EHR predictive task.</p>
<dl class="py class">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">aki_predictions.ehr_prediction_modeling.tasks.base_task.</span></span><span class="sig-name descname"><span class="pre">Task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Interface for dealing with tasks.</p>
<p>Initialise task object.</p>
<dl class="py method">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.config">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="aki_predictions.ehr_prediction_modeling.configdict.html#aki_predictions.ehr_prediction_modeling.configdict.ConfigDict" title="aki_predictions.ehr_prediction_modeling.configdict.ConfigDict"><span class="pre">ConfigDict</span></a></span></span><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Config creation for the task.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.default_configs">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_configs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="aki_predictions.ehr_prediction_modeling.configdict.html#aki_predictions.ehr_prediction_modeling.configdict.ConfigDict" title="aki_predictions.ehr_prediction_modeling.configdict.ConfigDict"><span class="pre">ConfigDict</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.default_configs" title="Permalink to this definition">¶</a></dt>
<dd><p>Default task config.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.default_masks">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_masks</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.default_masks" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of masks that are used in all this task’s composite masks.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.eval_masks">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">eval_masks</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.eval_masks" title="Permalink to this definition">¶</a></dt>
<dd><p>Return evaluation masks from config.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_eval_mask_dict">
<span class="sig-name descname"><span class="pre">get_eval_mask_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Batch</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_eval_mask_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the dict of loss masks to be used to mask evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>batch</strong> – tf.NextQueuedSequenceBatch, containing a batch of data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dict of string mask name to Tensors, the loss masks to be used in
evaluation, in time-major shape wnct [num_unroll, batch_size, channels,
num_targets].</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_hidden_layer">
<span class="sig-name descname"><span class="pre">get_hidden_layer</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BatchApply</span></span></span><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_hidden_layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the underlying modeling layer from this tasks layer.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_label_dicts">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_label_dicts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">FixedLenSequenceFeature</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">FixedLenFeature</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_label_dicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of labels to tensors that are used for the task.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_targets">
<span class="sig-name descname"><span class="pre">get_targets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Batch</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tensor</span></span></span><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_targets" title="Permalink to this definition">¶</a></dt>
<dd><p>Get targets from batches.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_task_variables">
<span class="sig-name descname"><span class="pre">get_task_variables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Batch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_output</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tensor</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tensor</span></span></span><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_task_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes variables for task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>batch</strong> – Either tf.NextQueuedSequenceBatch, containing a batch of data. Or
batches.TFBatch</p></li>
<li><p><strong>model_output</strong> – Either Tensor, the output from the model, shape wnt [
num_unroll, batch_size, ndim_model_output]. Or None</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>task_data.TaskVariables with all the variables from this task.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_train_mask">
<span class="sig-name descname"><span class="pre">get_train_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Batch</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tensor</span></span></span><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.get_train_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the mask to be used to mask the training loss.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>batch</strong> – tf.NextQueuedSequenceBatch, containing a batch of data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tensor, the loss mask to be used in training, in time-major
shape wnct [num_unroll, batch_size, channels, num_targets].</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.layer">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">layer</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">TaskLayers</span></em><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Return task layer.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.loss_weight">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">loss_weight</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.loss_weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Return loss weight from config.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return name of task from config.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.num_targets">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_targets</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.num_targets" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of targets for the task.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.prediction_task_type">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prediction_task_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.prediction_task_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns one of the values defined in {types.TaskType}.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.target_names">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">target_names</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.target_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Names of targets for the task.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.task_layer_sizes">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">task_layer_sizes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.task_layer_sizes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return task layer sizes.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.task_type">
<span class="sig-name descname"><span class="pre">task_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.task_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.window_hours">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">window_hours</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#aki_predictions.ehr_prediction_modeling.tasks.base_task.Task.window_hours" title="Permalink to this definition">¶</a></dt>
<dd><p>The total number of time horizons.</p>
<p>Note that this list possibly contains dupplicated values, e.g. with the Labs
task. It is because there are several labs with the same time horizons,
corresponding to several different targets that may have different mask
values (see mask_utils.TIME_CUTOFF_MASK).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of the time horizons (in hours) of all the targets. If several
targets have the same time horizon, the values are duplicated.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">aki-predictions</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">NHS AI Lab Skunkworks project: Predictive Renal Health</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="aki_predictions.html">aki_predictions package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="aki_predictions.html#subpackages">Subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="aki_predictions.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">aki_predictions</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="aki_predictions.html">aki_predictions package</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="aki_predictions.html">aki_predictions package</a><ul>
  <li><a href="aki_predictions.ehr_prediction_modeling.html">aki_predictions.ehr_prediction_modeling package</a><ul>
  <li><a href="aki_predictions.ehr_prediction_modeling.tasks.html">aki_predictions.ehr_prediction_modeling.tasks package</a><ul>
      <li>Previous: <a href="aki_predictions.ehr_prediction_modeling.tasks.adverse_outcome_task.html" title="previous chapter">aki_predictions.ehr_prediction_modeling.tasks.adverse_outcome_task module</a></li>
      <li>Next: <a href="aki_predictions.ehr_prediction_modeling.tasks.base_task_layer.html" title="next chapter">aki_predictions.ehr_prediction_modeling.tasks.base_task_layer module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;Crown copyright.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.1.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/aki_predictions.ehr_prediction_modeling.tasks.base_task.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>